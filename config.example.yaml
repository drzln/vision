# Vision Configuration
# Image processing pipelines with Google Images and KGIZ
version: "1.0"

app:
  # Google Images API configuration
  google_images:
    api_key: "${GOOGLE_API_KEY}"  # Use environment variable
    search_engine_id: "your-search-engine-id"
    safe_search: medium
    max_results: 10

  # KGIZ service configuration
  kgiz:
    endpoint: "https://api.kgiz.example.com"
    api_key: "${KGIZ_API_KEY}"
    timeout: 30

  # Output settings
  output_dir: ./output
  log_level: INFO
  max_concurrent: 4

pipelines:
  # Example: Fetch and process Google Images
  - name: google-product-images
    description: Fetch product images from Google and optimize them
    enabled: true
    tags: [google, products]
    input_patterns:
      - "*.jpg"
      - "*.png"
    output_format: webp
    steps:
      - name: fetch-images
        type: fetch_google
        params:
          query: "product photography"
          num_images: 5
        on_error: fail

      - name: resize
        type: resize
        params:
          width: 1200
          height: 800
          maintain_aspect: true
        on_error: skip

      - name: optimize
        type: filter
        params:
          filter: sharpen
          intensity: 0.5
        on_error: skip

      - name: save-output
        type: save
        params:
          output_dir: ./output/products
          format: webp
          quality: 85

  # Example: KGIZ processing pipeline
  - name: kgiz-enhancement
    description: Enhance images using KGIZ AI service
    enabled: true
    tags: [kgiz, ai, enhancement]
    steps:
      - name: process-with-kgiz
        type: fetch_kgiz
        params:
          operation: enhance
          model: default
        on_error: retry
        retry_count: 3

      - name: save-enhanced
        type: save
        params:
          output_dir: ./output/enhanced
